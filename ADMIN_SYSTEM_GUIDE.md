# 数脉银行管理员系统使用指南

## 🎯 系统概述

数脉银行管理员系统是基于角色的权限控制系统，为管理员用户提供了完整的系统管理功能，同时保持与普通用户界面的一致性。

## 🔐 管理员账户

### 默认管理员账户
- **用户名**: `admin`
- **密码**: `admin123`
- **角色**: `admin`

### 登录方式
1. 访问 http://localhost:3000
2. 使用管理员账户登录
3. 登录后将自动获得管理员权限和专用菜单

## 🏗️ 系统架构

### 后端权限系统
```
用户表 (users)
├── role 字段 (user/admin)
├── 权限验证中间件
└── 管理员专用API端点

权限控制
├── @verify_admin_access 装饰器
├── get_current_user_role 依赖
└── 基于角色的API访问控制
```

### 前端权限控制
```
权限组件
├── RoleGuard - 路由级权限保护
├── AdminGuard - 管理员路由保护
├── PermissionWrapper - 组件级权限控制
└── useAuth hook - 角色检查功能
```

## 📋 管理员功能

### 1. 管理员仪表板 (`/admin/dashboard`)
- **系统统计信息**
  - 总用户数
  - 管理员数量
  - 普通用户数量
  - 本月新用户
  - 本周新用户
- **快速操作入口**
  - 用户管理
  - 交易监控
  - 系统设置
  - 切换到用户视图

### 2. 用户管理 (`/admin/users`)
- **用户列表**
  - 分页显示所有用户
  - 按角色筛选 (用户/管理员)
  - 搜索用户 (用户名、姓名、邮箱)
- **用户操作**
  - 查看用户详情
  - 修改用户角色
  - 实时角色更新

### 3. 交易监控 (`/admin/transactions`)
- **交易统计**
  - 总交易数
  - 按类型分类统计
- **交易筛选**
  - 按账户筛选
  - 按交易类型筛选
  - 搜索交易记录
- **交易详情**
  - 增强交易信息显示
  - 用户信息脱敏显示

### 4. 系统设置 (`/admin/settings`)
- **配置管理**
  - 系统配置
  - 安全设置
  - 数据库设置
  - 通知设置
  - 监控设置
- **系统信息**
  - 服务器状态
  - 运行时间
  - 数据库状态

## 🔧 API 端点

### 管理员专用API
```
GET  /api/v1/admin/statistics          # 获取系统统计
GET  /api/v1/admin/users               # 获取用户列表
GET  /api/v1/admin/users/{user_id}     # 获取用户详情
PUT  /api/v1/admin/users/{user_id}/role # 更新用户角色
```

### 权限验证
所有管理员API都需要：
1. 有效的JWT token
2. 用户角色为 `admin`
3. 通过 `verify_admin_access` 验证

## 🎨 用户界面特性

### 统一设计
- 管理员界面与用户界面保持一致的设计风格
- 使用相同的组件库和样式系统
- 无缝的用户体验切换

### 渐进式权限显示
- 普通用户：只显示基础功能菜单
- 管理员用户：显示基础功能 + 管理员专用菜单
- 基于角色的组件条件渲染

### 响应式设计
- 支持桌面和移动设备
- 自适应布局
- 触摸友好的交互

## 🔒 安全特性

### 权限控制
- 前端路由保护
- 后端API权限验证
- 角色基础访问控制 (RBAC)

### 数据保护
- 用户信息脱敏显示
- 敏感操作确认
- 审计日志记录

## 🚀 使用流程

### 管理员日常操作
1. **登录系统**
   - 使用管理员账户登录
   - 验证管理员权限

2. **查看系统概况**
   - 访问管理员仪表板
   - 查看关键指标

3. **用户管理**
   - 查看用户列表
   - 管理用户角色
   - 处理用户问题

4. **交易监控**
   - 监控交易活动
   - 检查异常交易
   - 生成报告

5. **系统维护**
   - 检查系统状态
   - 调整配置参数
   - 处理系统问题

### 权限切换
- 管理员可以随时切换到普通用户视图
- 体验用户功能和界面
- 便于测试和问题排查

## 📊 监控和统计

### 实时数据
- 用户统计自动更新
- 交易数据实时同步
- 系统状态监控

### 数据分析
- 用户增长趋势
- 交易活动分析
- 系统性能指标

## 🛠️ 开发说明

### 扩展管理功能
1. 在 `corebank-backend/corebank/api/v1/endpoints/admin.py` 添加新的API端点
2. 在 `corebank-frontend/src/pages/admin/` 创建新的管理页面
3. 更新路由配置和导航菜单
4. 使用 `AdminGuard` 保护新路由

### 权限控制模式
```typescript
// 路由级保护
<AdminGuard>
  <AdminPage />
</AdminGuard>

// 组件级保护
<AdminOnly>
  <AdminButton />
</AdminOnly>

// 条件渲染
{isAdmin && <AdminFeature />}
```

## 🎉 总结

数脉银行管理员系统成功实现了：
- ✅ 基于角色的权限控制
- ✅ 统一的用户界面设计
- ✅ 完整的用户管理功能
- ✅ 实时的交易监控
- ✅ 灵活的系统配置
- ✅ 安全的权限验证
- ✅ 响应式的界面设计

管理员可以通过直观的界面高效地管理整个银行系统，同时享受与普通用户一致的操作体验。
